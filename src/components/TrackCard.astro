---
import { Image } from "@astrojs/image/components";
const { track, index } = Astro.props;
const artists = track.track.artists;
---

<div
	class="w-full h-auto rounded-sm shadow-sm bg-white relative overflow-hidden group">
	<div class="w-full h-auto overflow-hidden">
		{
			track ? (
				<Image
					src={track.track.album.images[1].url}
					alt="track"
					class="object-cover w-full"
					height={300}
					aspectRatio="1:1"
					format={"webp"}
				/>
			) : null
		}
	</div>

	<div
		class="p-2 flex justify-between items-end absolute bottom-0 w-full left-0 gap-2">
		<div class="flex flex-col justify-between gap-1">
			<p class="text-sm text-white flex flex-wrap gap-1">
				{
					artists.map((artist) => (
						<span class="bg-emerald-400 py-1 px-2 rounded-full">{artist.name}</span>
					))
				}
			</p>
			<p
				class="text-lg text-white font-bold group-hover:text-white duration-300 drop-shadow-lg">
				{track.track.name}
			</p>
		</div>
		<p
			class="text-2xl text-white bg-gray-900 w-10 h-10 grid place-content-center rounded-full flex-shrink-0">
			{index}
		</p>
	</div>
	<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
		<a
			href={track.track.external_urls.spotify}
			target="_blank"
			rel="noreferrer"
			class="border rounded-2xl opacity-0 group-hover:opacity-100 transition-all group-hover:bg-white group-hover:text-black duration-500 px-4 py-2 z-10">
			Go to Spotify
		</a>
	</div>
</div>
